<!doctype html>
<html>
  <head>
    <title>DrawPDF - Page Numbering</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f8f9fa;
        display: flex;
        gap: 20px;
      }
      .panel {
        flex: 1;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        height: 90vh;
        overflow: auto;
      }
      h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
      }
      pre {
        background: #f4f4f4;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
      }
      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
      }
      button:hover {
        background: #0056b3;
      }
      #editor {
        width: 100%;
        height: 100%;
        border: 1px solid #ddd;
        background: #fff;
      }
    </style>
  </head>
  <body>
    <!-- Panel Tr√°i: Code H∆∞·ªõng D·∫´n -->
    <div class="panel" style="flex: 0 0 40%">
      <h2>üíª Header & Footer Guide</h2>
      <p>C·∫•u h√¨nh Header v√† Footer t·ª± ƒë·ªông cho t√†i li·ªáu.</p>

      <h3>1. Configuration (Code Block)</h3>
      <p>
        S·ª≠ d·ª•ng <strong>Code Block</strong> (<code>// eval</code>) cu·ªëi vƒÉn b·∫£n
        ƒë·ªÉ th√™m Header ho·∫∑c Footer.
      </p>

      <h4>Basic Usage</h4>
      <pre><code class="language-javascript">// eval
// Header (ƒê·∫ßu trang)
pdf.addHeader("B√°o C√°o T√†i Ch√≠nh", { align: "center", fontSize: 12 });

// Footer (Ch√¢n trang)
pdf.addFooter("Trang {pageNumber} / {totalPages}", { align: "right" });</code></pre>

      <h4>Options Reference</h4>
      <ul style="font-size: 0.9em; line-height: 1.6">
        <li><code>fontSize</code>: C·ª° ch·ªØ (default: 10)</li>
        <li><code>color</code>: M√†u ch·ªØ [R, G, B] (default: [150,150,150])</li>
        <li><code>align</code>: CƒÉn ch·ªânh ("left", "center", "right")</li>
        <li>
          <code>y</code>: V·ªã tr√≠ Y (Header default: 10, Footer default: bottom)
        </li>
        <li>
          <strong>Placeholders:</strong> <code>{pageNumber}</code>,
          <code>{totalPages}</code>
        </li>
      </ul>

      <h4>Advanced: Mixed Layout</h4>
      <p>K·∫øt h·ª£p nhi·ªÅu Header/Footer c√πng l√∫c.</p>
      <pre><code class="language-javascript">// eval
// --- HEADERS ---
// Tr√°i: T√™n c√¥ng ty
pdf.addHeader("DrawPDF Corp.", { align: "left", color: [0,0,255] });
// Ph·∫£i: Ng√†y in
pdf.addHeader("Date: 2024-02-04", { align: "right", fontSize: 9 });

// --- FOOTERS ---
// Gi·ªØa: Copyright
pdf.addFooter("¬© 2024 All Rights Reserved", { align: "center", fontSize: 8 });
// Ph·∫£i: S·ªë trang
pdf.addFooter("{pageNumber}", { align: "right" });</code></pre>

      <div
        style="
          margin-top: 30px;
          padding: 15px;
          background: #e9ecef;
          border-radius: 5px;
        "
      >
        <strong>Th·ª≠ Nghi·ªám:</strong><br />
        T·∫°o n·ªôi dung d√†i ƒë·ªÉ test s·ªë trang.
        <br />
        <button onclick="runDemo()" style="width: 100%; margin-bottom: 10px">
          üöÄ Generate Long Content
        </button>
        <button onclick="reviewPdf()" style="width: 100%; background: #28a745">
          üìÑ Review PDF
        </button>
      </div>
    </div>

    <!-- Panel Ph·∫£i: Editor -->
    <div class="panel">
      <h2>üìÑ Live Editor</h2>
      <div id="editor"></div>
    </div>

    <script src="https://unpkg.com/masax-drawpdf@2.2.2/dist/drawpdf.standalone.umd.cjs"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>

    <script>
      let pdfInstance = null;

      document.addEventListener("DOMContentLoaded", async function () {
        const DrawPDF = window.DrawPDF.default;

        pdfInstance = await DrawPDF.create("#editor", {
          showPageNumbers: true,
          footer: {
            text: "Trang {page} / {pages}",
            align: "center", // center, right, left
          },
          // Toolbar t·ªëi gi·∫£n
          toolbar: {
            items: [
              "heading",
              "bold",
              "italic",
              "bulletedList",
              "numberedList",
              "undo",
              "redo",
            ],
            shouldNotGroupWhenFull: true,
          },
        });

        const blueprint = DrawPDF.parseHtml(`
                <h2>Page Numbering Demo</h2>
                <p>N·ªôi dung m·∫∑c ƒë·ªãnh trang 1.</p>
                <p>H√£y nh·∫•n n√∫t <strong>Generate Long Content</strong> ƒë·ªÉ t·∫°o nhi·ªÅu trang.</p>
            `);
        pdfInstance.setData(blueprint);
      });

      function runDemo() {
        if (pdfInstance) {
          let longContent = `
          <h2>Long Document Test (3 Pages)</h2>`;
          // T·∫°o ƒë·ªß n·ªôi dung cho kho·∫£ng 3 trang
          for (let i = 1; i <= 60; i++) {
            // Th√™m heading m·ªói 20 d√≤ng ƒë·ªÉ d·ªÖ nh√¨n
            if (i % 20 === 0) longContent += `<h3>Section ${i / 20}</h3>`;
            longContent += `<p><strong>Line ${i}:</strong> N·ªôi dung d√≤ng th·ª© ${i} ƒë·ªÉ test vi·ªác tr√†n trang v√† ƒë√°nh s·ªë trang t·ª± ƒë·ªông ·ªü footer.</p>`;
          }

          longContent += `
<pre><code class="language-javascript">// eval
// --- HEADERS ---
// 1. Header tr√°i: T√™n t√†i li·ªáu quan tr·ªçng
pdf.addHeader("CONFIDENTIAL REPORT", {
    align: "left",
    color: [200, 0, 0], // ƒê·ªè ƒë·∫≠m
    fontSize: 9
});

// 2. Header ph·∫£i: Ng√†y gi·ªù
pdf.addHeader("Xu·∫•t b·∫£n: " + new Date().toLocaleDateString('vi-VN'), {
    align: "right",
    fontSize: 9,
    color: [100, 100, 100]
});

// --- FOOTERS ---
// 3. Footer tr√°i: T√™n ng∆∞·ªùi in
pdf.addFooter("Printed by: Admin", {
    align: "left",
    fontSize: 8,
    color: [150, 150, 150]
});

// 4. Footer ph·∫£i: S·ªë trang
pdf.addFooter("Trang {pageNumber} / {totalPages}", {
    align: "right", 
    fontSize: 9
});

// 5. Footer gi·ªØa: Copyright
pdf.addFooter("¬© DrawPDF Library 2024", {
    align: "center",
    y: 5, // S√°t ƒë√°y
    fontSize: 7
});
</code></pre>`;

          const bluePrint = DrawPDF.default.parseHtml(longContent);

          pdfInstance.setData(bluePrint);
        }
      }

      function reviewPdf() {
        if (pdfInstance) {
          pdfInstance.getData();
          const blob = pdfInstance.getBlob();
          const url = URL.createObjectURL(blob);
          window.open(url, "_blank");
        }
      }
    </script>
  </body>
</html>
