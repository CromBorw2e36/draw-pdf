<!doctype html>
<html>
  <head>
    <title>DrawPDF - Signature Suite</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: #f8f9fa;
        display: flex;
        gap: 20px;
      }
      .panel {
        flex: 1;
        background: white;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        height: 90vh; /* Fixed height relative to viewport */
        overflow-y: auto; /* Internal scrolling */
        display: flex;
        flex-direction: column;
      }
      h2 {
        margin-top: 0;
        color: #2c3e50;
        border-bottom: 2px solid #eee;
        padding-bottom: 10px;
      }
      h3 {
        color: #007bff;
        margin-top: 25px;
        margin-bottom: 10px;
      }
      .badge {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: bold;
        margin-left: 5px;
      }
      .badge.simple {
        background: #e1f0ff;
        color: #007bff;
      }
      .badge.dual {
        background: #d4edda;
        color: #155724;
      }
      .badge.form {
        background: #fff3cd;
        color: #856404;
      }

      pre {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
        border: 1px solid #e9ecef;
        margin: 10px 0;
      }
      code {
        font-family: "Consolas", monospace;
        font-size: 13px;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 15px;
        font-weight: 600;
        transition: background 0.2s;
        margin-top: 10px;
        width: 100%;
      }
      button:hover {
        background: #0056b3;
      }
      button.secondary {
        background: #6c757d;
        margin-top: 10px;
      }
      button.secondary:hover {
        background: #5a6268;
      }

      .demo-box {
        margin-top: auto;
        padding: 20px;
        background: #f1f3f5;
        border-radius: 8px;
        border: 1px solid #dee2e6;
      }

      #editor {
        flex: 1;
        border: 1px solid #ddd;
        border-radius: 4px;
      }

      /* Props table */
      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
        margin: 10px 0;
      }
      th,
      td {
        border: 1px solid #dee2e6;
        padding: 8px;
        text-align: left;
      }
      th {
        background-color: #f8f9fa;
      }
    </style>
  </head>
  <body>
    <!-- Panel Tr√°i: H∆∞·ªõng D·∫´n -->
    <div class="panel" style="flex: 0 0 45%">
      <h2>ÔøΩÔ∏è Signature Suite Guide</h2>
      <p>B·ªô c√¥ng c·ª• t·∫°o ch·ªØ k√Ω chuy√™n nghi·ªáp cho m·ªçi tr∆∞·ªùng h·ª£p.</p>

      <h3>1. Basic Signature <span class="badge simple">Single</span></h3>
      <p>T·∫°o m·ªôt kh·ªëi ch·ªØ k√Ω ƒë∆°n gi·∫£n v·ªõi ƒë∆∞·ªùng k·∫ª.</p>
      <pre><code class="language-javascript">// pdf.addSimpleSignature(name, title, x, options)
pdf.addSimpleSignature("Nguy·ªÖn VƒÉn A", "GI√ÅM ƒê·ªêC", null, {
  fontSize: 12,
  width: 150
});</code></pre>

      <h3>2. Dual Signature <span class="badge dual">Contract</span></h3>
      <p>Layout 2 b√™n c·ªï ƒëi·ªÉn cho h·ª£p ƒë·ªìng (B√™n A - B√™n B).</p>
      <pre><code class="language-javascript">// pdf.addDualSignature(leftConfig, rightConfig)
pdf.addDualSignature(
  { 
    title: "ƒê·∫†I DI·ªÜN B√äN A", 
    name: "Nguy·ªÖn VƒÉn A", 
    note: "(K√Ω, ƒë√≥ng d·∫•u)",
    date: "Ng√†y 01/01/2024" 
  },
  { 
    title: "ƒê·∫†I DI·ªÜN B√äN B", 
    name: "Tr·∫ßn Th·ªã B", 
    note: "(K√Ω, ghi r√µ h·ªç t√™n)" 
  }
);</code></pre>

      <h3>3. Smart Signature <span class="badge form">Advanced</span></h3>
      <p>
        T·ª± ƒë·ªông d√πng ·∫£nh n·∫øu c√≥, ho·∫∑c t·∫°o ch·ªØ k√Ω gi·∫£ (text-based) n·∫øu kh√¥ng.
      </p>
      <pre><code class="language-javascript">// pdf.addSmartSignature(name, title, imageOpts, date, opts)
pdf.addSmartSignature("Nguy·ªÖn VƒÉn A", "GI√ÅM ƒê·ªêC", {
  imagePath: null, // Ho·∫∑c ƒë∆∞·ªùng d·∫´n ·∫£nh
  fallbackText: "Nguyen Van A", // Ch·ªØ k√Ω Text n·∫øu ko c√≥ ·∫£nh
  createFallback: true
}, "Ng√†y 20/10/2024", {
  align: "right",
  blockWidth: 150
});</code></pre>

      <h3>4. Secondary Signature <span class="badge simple">Initials</span></h3>
      <p>Ch·ªØ k√Ω nh√°y / k√Ω t·∫Øt ·ªü g√≥c trang (xu·∫•t hi·ªán tr√™n TO√ÄN B·ªò trang).</p>
      <pre><code class="language-javascript">// pdf.addSecondarySignature(options)
pdf.addSecondarySignature({
  nameTag: "NVA", // Ch·ªØ hi·ªÉn th·ªã
  positions: ["top-right", "bottom-left"], // V·ªã tr√≠
  color: [100, 100, 100],
  fontSize: 10
});</code></pre>

      <h3>5. Picture Signature <span class="badge form">File</span></h3>
      <p>Ch√®n ·∫£nh ch·ªØ k√Ω t·ª´ ƒë∆∞·ªùng d·∫´n file ho·∫∑c Base64.</p>
      <pre><code class="language-javascript">// pdf.addSignatureFromFile(name, title, path, date, opts)
pdf.addSignatureFromFile(
  "Nguy·ªÖn VƒÉn A", 
  "GI√ÅM ƒê·ªêC", 
  "images/signature.png", // Path ho·∫∑c Base64
  "Ng√†y 20/10/2024"
);</code></pre>

      <h3>
        6. Custom Text Signature <span class="badge simple">Stylized</span>
      </h3>
      <p>T·∫°o ch·ªØ k√Ω c√°ch ƒëi·ªáu t·ª´ vƒÉn b·∫£n (gi·∫£ l·∫≠p ch·ªØ k√Ω tay).</p>
      <pre><code class="language-javascript">// pdf.createTextSignature(text) -> Base64 Image
const sigImg = pdf.createTextSignature("Nguyen Van A");

// D√πng chung v·ªõi addSignatureWithImage
pdf.addSignatureWithImage(
  "Nguy·ªÖn VƒÉn A",
  "NG∆Ø·ªúI L·∫¨P BI·ªÇU",
  sigImg,
  "Ng√†y 20/10/2024"
);</code></pre>

      <h3>7. Form Signature <span class="badge form">Forms</span></h3>
      <p>T·∫°o c√°c d√≤ng ƒëi·ªÅn th√¥ng tin (Ng√†y, Ch·ª©c v·ª•, K√Ω t√™n) t·ª± ƒë·ªông.</p>
      <pre><code class="language-javascript">// pdf.addSignature(signers, options)
pdf.addSignature([
  { title: "K·∫ø to√°n tr∆∞·ªüng", label: "(K√Ω t√™n)" }
], {
  layout: "horizontal", 
  spacing: 30
});</code></pre>

      <div class="demo-box">
        <strong>‚ö° Live Demo:</strong><br />
        T·∫°o t√†i li·ªáu m·∫´u ch·ª©a t·∫•t c·∫£ lo·∫°i ch·ªØ k√Ω tr√™n.
        <button onclick="runDemo()" style="margin-bottom: 5px">
          üöÄ Generate Demo Contract
        </button>
        <button
          onclick="reviewPdf()"
          style="background: #28a745; margin-top: 5px"
        >
          üìÑ Review PDF
        </button>
      </div>
    </div>

    <!-- Panel Ph·∫£i: Editor -->
    <div class="panel">
      <h2>üìÑ Live Preview</h2>
      <div id="editor"></div>
    </div>

    <script src="https://unpkg.com/masax-drawpdf@2.2.2/dist/drawpdf.standalone.umd.cjs"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>

    <script>
      let pdfInstance = null;

      document.addEventListener("DOMContentLoaded", async function () {
        const DrawPDF = window.DrawPDF.default;
        pdfInstance = await DrawPDF.create("#editor");
      });

      function runDemo() {
        if (!pdfInstance) return;

        const content = `
          <div style="text-align: center; margin-bottom: 30px;">
            <h1>H·ª¢P ƒê·ªíNG D·ªäCH V·ª§</h1>
            <p>S·ªë: 123/2024/HDDV</p>
            <hr>
          </div>
          
          <p>H√¥m nay, ng√†y ... th√°ng ... nƒÉm 2024, ch√∫ng t√¥i g·ªìm c√≥:</p>
          
          <h3>I. ƒê·∫†I DI·ªÜN B√äN A (B√äN THU√ä)</h3>
          <p>C√¥ng ty C·ªï ph·∫ßn C√¥ng ngh·ªá ABC<br>ƒê·ªãa ch·ªâ: 123 ƒê∆∞·ªùng L√°ng, H√† N·ªôi</p>
          
          <h3>II. ƒê·∫†I DI·ªÜN B√äN B (B√äN CUNG C·∫§P)</h3>
          <p>C√¥ng ty TNHH Gi·∫£i ph√°p XYZ<br>ƒê·ªãa ch·ªâ: 456 Hai B√† Tr∆∞ng, TP.HCM</p>
          
          <p>Hai b√™n th·ªëng nh·∫•t k√Ω k·∫øt h·ª£p ƒë·ªìng n√†y v·ªõi c√°c ƒëi·ªÅu kho·∫£n sau...</p>
          <p><i>(N·ªôi dung h·ª£p ƒë·ªìng r√∫t g·ªçn cho demo)</i></p>
          
          <br><br>
          <p>H·ª£p ƒë·ªìng ƒë∆∞·ª£c l·∫≠p th√†nh 02 b·∫£n c√≥ gi√° tr·ªã nh∆∞ nhau.</p>
          <br><br>

<pre><code class="language-javascript">// eval
// 1. Secondary Signature (Ch·ªØ k√Ω nh√°y)
// S·∫Ω xu·∫•t hi·ªán ·ªü g√≥c tr√™n ph·∫£i v√† d∆∞·ªõi tr√°i c·ªßa TO√ÄN B·ªò trang
pdf.addSecondarySignature({
  nameTag: "N.V.A",
  positions: ["top-right", "bottom-left"],
  fontSize: 9,
  margin: 10
});

// 2. Dual Signature (Ch·ªØ k√Ω h·ª£p ƒë·ªìng ch√≠nh)
pdf.addDualSignature(
  {
    title: "ƒê·∫†I DI·ªÜN B√äN A",
    name: "NGUY·ªÑN VƒÇN A",
    note: "(K√Ω, ƒë√≥ng d·∫•u)",
    date: "H√† N·ªôi, ng√†y 20/10/2024"
  },
  {
    title: "ƒê·∫†I DI·ªÜN B√äN B",
    name: "TR·∫¶N TH·ªä B",
    note: "(K√Ω, ghi r√µ h·ªç t√™n)",
    date: "TP.HCM, ng√†y 20/10/2024"
  }
);

pdf.addSpace(30);

// 3. Smart Signature (Ng∆∞·ªùi l√†m ch·ª©ng - gi·∫£ l·∫≠p ch·ªØ k√Ω ·∫£nh)
pdf.addText("X√°c nh·∫≠n c·ªßa Lu·∫≠t s∆∞:", null, null, { fontStyle: 'bold' });
pdf.addSmartSignature("L√™ VƒÉn C", "Lu·∫≠t S∆∞ Ri√™ng", {
    imagePath: "../image/chu-ki-mau.jpg", // ·∫¢nh ch·ªØ k√Ω th·∫≠t
    fallbackText: "LeVanC",
    createFallback: true
}, "20/10/2024", {
    align: "left",
    blockWidth: 120,
    imageWidth: 30,
    imageHeight: 15
});

// 4. Custom Text Signature & Picture Signature
// T·∫°o ·∫£nh ch·ªØ k√Ω t·ª´ text "Approved"
const sigImg = pdf.createTextSignature("Approved by BOD");

// B√™n tr√°i: ·∫¢nh t·ª´ Text
pdf.addSignatureWithImage(
    "H·ªôi ƒê·ªìng Qu·∫£n Tr·ªã", 
    "PH√ä DUY·ªÜT (Text)", 
    sigImg, 
    "20/10/2024", 
    { align: 'left', blockWidth: 100 }
);

// B√™n ph·∫£i: ·∫¢nh t·ª´ File (chu-ki-mau2.jpg)
// L∆∞u √Ω: C·∫ßn await n·∫øu g·ªçi trong async func, nh∆∞ng ·ªü ƒë√¢y d√πng trong eval
// n√™n ta d√πng addSignatureFromFile s·∫Ω t·ª± x·ª≠ l√Ω (tuy nhi√™n eval sync kh√≥ handle async image load)
// T·ªët nh·∫•t trong demo eval n√†y ta d√πng addSmartSignature ho·∫∑c addSignatureWithImage v·ªõi base64.
// Nh∆∞ng v√¨ PDFRenderer handles async eval, ta c√≥ th·ªÉ th·ª≠:

// pdf.addSignatureFromFile(...) 
// NOTE: Trong m√¥i tr∆∞·ªùng eval c·ªßa PDFRenderer, c√°c h√†m async c√≥ th·ªÉ kh√¥ng ch·∫°y ƒë√∫ng th·ª© t·ª± 
// n·∫øu kh√¥ng c√≥ 'await'. 
// Tuy nhi√™n, context eval kh√¥ng h·ªó tr·ª£ top-level await tr·ª±c ti·∫øp trong string code n·∫øu kh√¥ng ƒë∆∞·ª£c wrap.
// PDFRenderer.js ƒë√£ wrap code trong h√†m async? -> check PDFRenderer.

// C√°ch an to√†n cho demo n√†y:
pdf.addSmartSignature("Nguy·ªÖn Th·ªã D", "K·∫æ TO√ÅN TR∆Ø·ªûNG", {
    imagePath: "../image/chu-ki-mau2.jpg",
    fallbackText: "NguyenThiD"
}, "20/10/2024", { 
    align: "right",
    blockWidth: 100
});

pdf.addSpace(40);

// 5. Form Signature (Ph·∫ßn duy·ªát n·ªôi b·ªô)
pdf.addNewPage(); 
pdf.addTitle("PHI·∫æU DUY·ªÜT H·ªí S∆†", { align: 'center', fontSize: 14 });
pdf.addSpace(20);

pdf.addSignature([
    { title: "Ng∆∞·ªùi ƒê·ªÅ Xu·∫•t" },
    { title: "Tr∆∞·ªüng Ph√≤ng" }, 
    { title: "Gi√°m ƒê·ªëc Duy·ªát" }
], {
    layout: "horizontal",
    showDate: true,
    spacing: 15
});
</code></pre>
        `;

        // Parse & Set Data
        const blueprint = DrawPDF.default.parseHtml(content);
        pdfInstance.setData(blueprint);
      }

      function reviewPdf() {
        if (pdfInstance) {
          pdfInstance.getData();
          const blob = pdfInstance.getBlob();
          const url = URL.createObjectURL(blob);
          window.open(url, "_blank");
        }
      }
    </script>
  </body>
</html>
